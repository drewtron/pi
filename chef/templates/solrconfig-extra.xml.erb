<requestHandler name="/<%= @mosaicImportHandlerName %>"
                    class="com.glgroup.search.importhandler.MosaicImportHandler">
  <lst name="defaults">
    <str name="solr.master.url">http://localhost:<%= @jettyPort %>/solr/<%= @name %></str>
    <str name="mongo.url"><%= @mosaicImportMongoURL %></str>
    <str name="mongo.port"><%= @mosaicImportMongoPort %></str>
    <str name="mongo.db"><%= @mosaicImportMongoDBName %></str>
    <str name="mongo.columnstore"><%= @mosaicImportMongoColumnName %></str>
    <str name="mongo.maxdoc">500</str>

     <!-- When adding a new field to the mosaic-ngrams index,
      you must also add it to the list of defaults
      for the mosaicImport handler in solrconfig
      -->
    <str name="id">id</str>
    <str name="name">name</str>
    <str name="partyType">partyType</str>
    <str name="stockExchange">stockExchange</str>
    <str name="tickerSymbol">tickerSymbol</str>
    <str name="isPublic">isPublic</str>
    <str name="relationship_count">relationship_count</str>

  </lst>
</requestHandler>

<requestHandler name="/pi-companysearch"
                class="solr.SearchHandler">
  <lst name="defaults">
      <!--
      http://wiki.apache.org/solr/ExtendedDisMax
      -->
      <str name="defType">edismax</str>
      <str name="echoParams">explicit</str>
      <float name="tie">0.01</float>
      <str name="qf">id name^15.0 name_ngram stockExchange_ngram tickerSymbol_ngram stockExchange tickerSymbol</str>
      <str name="mm">
        <!--
        if less than 2 optional clauses they all must match, for 2-3 clauses,
        one less than the number of clauses must match, for 4 or more
        75% must match, rounded down
        -->
        1&lt;-1 3&lt;75%
      </str>
      <str name="pf">name</str>
      <str name="uf">*</str>
      <str name="q.op">OR</str>
      <str name="q.alt">*:*</str>
      <str name="wt">json</str>
      <str name="bf">sum(product(log(relationship_count),200),if(def(isPublic,false),10,0))</str>
      <str name="facet">true</str>
      <str name="facet.mincount">1</str>
  </lst>
</requestHandler>